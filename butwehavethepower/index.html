<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Union Strike Folk Song</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<h1 id="title">Union Strike Folk Song</h1>

<video src="https://www.cs.tufts.edu/comp/20/butwehavethepower.mp4" id="butwehavethepower" controls></video>
<div id="lyrics"></div>

<script>
	words = [
	"Lisa:",
	"Come gather round, children",
	"It's high time ye learned",
	"'Bout a hero named Homer",
	"And a devil named Burns.",
	" ",
	"We'll march 'till we drop", 
	"The girls and the fellas.",
	"We'll fight 'till the death", 
	"Or else fold like umbrellas.",
	" ",
	"So we'll march day and night",
	"By the big cooling tower.",
	"They have the plant",
	" ",
	"But we have the power.",
	" ",
	"Lenny:",
	"Now do Classical Gas!",
	" ",
	"So we'll march day and night",
	"By the big cooling tower.",
	"They have the plant",
	" ",
	"But we have the power."];

	

	function sleep(milliseconds) {
  		var start = new Date().getTime();
  		for (var i = 0; i < 1e7; i++) {
    		if ((new Date().getTime() - start) > milliseconds){
      		break;
      		console.log("in sleep function")
    		}
  		}
	}

	function displayLyrics(){
		var lyrics = document.getElementById("lyrics"); 
		var i = 0; 
		const videoPlayer = document.getElementById("butwehavethepower");
		i = Math.floor (videoPlayer.currentTime);
		if(i < 6 || i > 90){
			return;
		}
		i = Math.floor ((i - 6)/3.3);
		if(i > 24){
			i = 24;
		}
		lyrics.innerHTML = words[i++]; 
		console.log("printing line  " + i);		
	}

	
	document.getElementById("butwehavethepower").addEventListener("timeupdate",displayLyrics, false);


	

	

</script>
</body>
</html>	